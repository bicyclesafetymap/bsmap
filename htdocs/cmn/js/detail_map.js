function onEachFeaturePopup(e,t){e.properties&&e.properties.title&&t.bindPopup("<div class='mapPopUp'><div class='mapPopUp_day'>"+e.properties.time+"</div><div class='mapPopUp_inner'><div class='mapPopUp_pic' style='background-image: url(/"+e.properties.thumb+")'></div><div class='mapPopUp_text'>"+e.properties.title+"</div></div><div class='mapPopUp_more'><a href='"+e.properties.detail+"'>詳細</a></div></div>")}function adjustPanoramaPov(){var e,t,a,n,o;e=panorama.getPosition(),t=latlng,a=t.lat()-e.lat(),n=t.lng()-e.lng(),o=Math.atan2(n,a)/Math.PI*180,setTimeout(function(){})}var homeZoomLev=10,map=L.map("detailMap",{center:homeLatLng,zoom:homeZoomLev,zoomControl:!1,scrollWheelZoom:!1,dragging:!0});$(".js-detiilMapOver-del").on("click",function(e){$(this).css("display","none")});var styles=[{elementType:"geometry",stylers:[{hue:"#ff4400"},{saturation:-100},{lightness:-4},{gamma:.72}]},{featureType:"road",elementType:"labels.icon"},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{hue:"#0077ff"},{gamma:3.1}]},{featureType:"water",stylers:[{hue:"#00ccff"},{gamma:.44},{saturation:-33}]},{featureType:"poi.park",stylers:[{hue:"#44ff00"},{saturation:-23}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{hue:"#007fff"},{gamma:.77},{saturation:65},{lightness:99}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{gamma:.11},{weight:5.6},{saturation:99},{hue:"#0091ff"},{lightness:-86}]},{featureType:"transit.line",elementType:"geometry",stylers:[{lightness:-48},{hue:"#ff5e00"},{gamma:1.2},{saturation:-23}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{saturation:-64},{hue:"#ff9100"},{lightness:16},{gamma:.47},{weight:2.7}]}],ggl2=new L.Google("ROADMAP",{maxZoom:21,mapOptions:{styles:styles},minZoom:3});map.addLayer(ggl2);var baseIconSetting=L.Icon.extend({options:{iconSize:[40,50]}});fetch("/api/mapdetail/"+point_id+".json").then(function(e){return e.json()}).then(function(e){var t=L.geoJson(e,{pointToLayer:function(e,t){var a=new baseIconSetting({iconUrl:"/"+e.properties.icon.iconUrl});return L.marker(t,{icon:a})}});map.addLayer(t)})["catch"](function(e){}),$(function(){var e=$(".detailIconContainer .detailIconContainer_item"),t=e.length-1;e.each(function(a){a%4==0&&0!==a?$(this).after('<div class="detailIconContainer_target js-target"></div>'):a==t&&$(this).after('<div class="detailIconContainer_target js-target"></div>'),$(this).on("click",function(){var t=(e.index(this),$(this).attr("data-title")),a=$(".js-target");return $(this).hasClass("active")?(a.hide(),e.removeClass("active"),!1):(a.hide(),e.removeClass("active"),$(this).addClass("active"),void $(this).parent().find(".js-target").text(t).fadeIn())})})});var parameters,pitch=0,heading=parseInt(180*Math.random()),latlng=new google.maps.LatLng(homeLatLng[0],homeLatLng[1]),map2=new google.maps.Map(document.getElementById("stvMap"),{zoom:16,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP}),panorama=new google.maps.StreetViewPanorama(document.getElementById("stvMap"),{position:latlng,pov:{heading:heading,pitch:pitch}});map2.setStreetView(panorama);var streetViewDidAppearListener=google.maps.event.addListener(panorama,"status_changed",function(){if(google.maps.event.removeListener(streetViewDidAppearListener),!panorama.getPosition().equals(latlng))return void adjustPanoramaPov();var e=new google.maps.LatLng(latlng.lat(),latlng.lng()+4e-6);setTimeout(function(){panorama.setPosition(e)}),document.getElementById("stvMap").style.display="none",document.getElementById("de_03").style.display="none",$(".detailNavi_item-width").remove();var t=google.maps.event.addListener(panorama,"status_changed",function(){google.maps.event.removeListener(t),panorama.getPosition().equals(e)||(document.getElementById("stvMap").style.display="block",adjustPanoramaPov())})});